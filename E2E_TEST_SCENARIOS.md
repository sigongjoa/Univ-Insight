# E2E 테스트 시나리오 (End-to-End Test Scenarios)

## 📋 테스트 계획

### 테스트 환경
- **Frontend:** React 18 + TypeScript (http://localhost:5173)
- **Backend:** FastAPI + SQLite (http://localhost:8000)
- **테스트 도구:** Manual Testing + API Testing + Mock Data
- **브라우저:** Chrome/Edge (자동화 테스트 준비)

---

## 🎯 주요 유즈케이스 (Use Cases)

### UC-1: 사용자 회원가입 및 로그인
**시나리오:** 새로운 사용자가 가입하고 로그인

**전제 조건:**
- 애플리케이션이 http://localhost:5173에서 실행 중

**테스트 단계:**

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | /login 페이지 접속 | 로그인 폼 표시 |
| 2 | userId: "student01" 입력 | 입력 필드에 값 표시 |
| 3 | name: "김철수" 입력 | 입력 필드에 값 표시 |
| 4 | password: "password123" 입력 | 입력 필드에 비밀번호 마스킹 |
| 5 | role: "student" 선택 | student 역할 선택됨 |
| 6 | interests 추가: ["AI", "ML", "빅데이터"] | 3개 태그 추가됨 |
| 7 | "로그인" 버튼 클릭 | 홈페이지로 리다이렉트 |
| 8 | 로그인 상태 확인 | 사용자 정보와 interests 표시 |

**예상 결과:** ✅ 사용자 정보가 저장되고 홈페이지 표시

---

### UC-2: 논문 검색 및 상세 정보 조회
**시나리오:** 사용자가 관심 주제의 논문을 검색하고 상세 정보를 확인

**전제 조건:**
- 사용자가 로그인된 상태
- 백엔드에서 논문 데이터 사용 가능 (또는 mock 데이터)

**테스트 단계:**

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | 홈페이지 "🔍 논문 검색" 클릭 | /research 페이지로 이동 |
| 2 | 검색 주제: "인공지능" 입력 | 입력 필드에 값 표시 |
| 3 | 대학 필터: "KAIST" 선택 | KAIST가 선택됨 |
| 4 | "검색" 버튼 클릭 | 로딩 스피너 표시 후 논문 카드 로드 |
| 5 | 첫 번째 논문 "상세 정보" 클릭 | 모달 팝업 표시 |
| 6 | 모달에서 정보 확인 | title, university, analysis, career_path 표시 |
| 7 | 진로 정보 섹션 확인 | job_title, salary_hint, companies 표시 |
| 8 | 실천 항목 섹션 확인 | subjects, research_topic 표시 |
| 9 | "Plan B 보기" 버튼 클릭 | PlanB 페이지로 네비게이션 |

**예상 결과:** ✅ 논문 상세 정보 모달 표시 및 Plan B 네비게이션 성공

---

### UC-3: Plan B 대학 대안 조회
**시나리오:** 사용자가 원래 대학보다 입시 기회가 더 좋은 대안 대학을 조회

**전제 조건:**
- ResearchPage에서 "Plan B 보기" 클릭
- 백엔드에서 유사 논문 데이터 있음 (또는 mock 데이터)

**테스트 단계:**

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | /research/:paperId/plan-b 페이지 로드 | 원본 논문 헤더 표시 |
| 2 | 헤더 확인 | title, university, tier, 설명 표시 |
| 3 | Plan B 제안 리스트 확인 | 최소 1개 이상의 대학 제안 표시 |
| 4 | 첫 번째 제안 카드 확인 | title, university, tier, similarity_score 표시 |
| 5 | 유사도 진행바 확인 | 0-100% 범위의 진행바 표시 |
| 6 | 선택 팁 섹션 확인 | 4가지 팁 항목 표시 |
| 7 | "상세 정보" 버튼 클릭 | 논문 상세 정보 표시 |
| 8 | "다른 논문 보기" 버튼 클릭 | /research로 리다이렉트 |

**예상 결과:** ✅ Plan B 대안 리스트와 상세 정보 올바르게 표시

---

### UC-4: 개인 맞춤 리포트 생성
**시나리오:** 사용자의 관심사에 맞춰 리포트를 생성하고 조회

**전제 조건:**
- 사용자가 로그인된 상태
- 사용자 profile에 interests 설정됨

**테스트 단계:**

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | 홈페이지 "📄 리포트 보기" 클릭 | /reports 페이지로 이동 |
| 2 | 페이지 로드 확인 | "새 리포트 생성" 버튼 표시 |
| 3 | "새 리포트 생성" 버튼 클릭 | 로딩 상태 진행 |
| 4 | 리포트 생성 완료 | 성공 메시지 표시 및 리포트 목록 갱신 |
| 5 | 리포트 카드 확인 | report ID, 생성일, 논문 수 표시 |
| 6 | 리포트 카드 클릭 | 카드 확장되고 상세 정보 표시 |
| 7 | 상세 정보 확인 | status badge, paper count, 생성일 표시 |
| 8 | "다운로드" 버튼 확인 | 버튼 표시됨 (기능은 향후 구현) |
| 9 | "상세 보기" 버튼 확인 | 버튼 표시됨 (기능은 향후 구현) |

**예상 결과:** ✅ 리포트 생성 및 전개 기능 동작

---

### UC-5: 사용자 프로필 관리
**시나리오:** 사용자가 프로필 정보와 관심사를 관리

**전제 조건:**
- 사용자가 로그인된 상태

**테스트 단계:**

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | 홈페이지 "👤 프로필" 클릭 | /profile 페이지로 이동 |
| 2 | 프로필 헤더 확인 | 사용자명, 역할, ID, 가입일 표시 |
| 3 | 이름 필드 수정 | 새 이름 "박영희"로 변경 |
| 4 | 역할 필드 확인 | read-only 상태 확인 |
| 5 | 새로운 관심사 입력 | "사이버보안" 입력 |
| 6 | "추가" 버튼 클릭 | 새 태그 추가되고 입력 필드 초기화 |
| 7 | 기존 관심사 삭제 | "×" 버튼으로 태그 제거 |
| 8 | "프로필 저장" 버튼 클릭 | 로딩 후 성공 메시지 표시 |
| 9 | 알림 설정 확인 | 3개의 체크박스 표시 |
| 10 | 서비스 통합 섹션 확인 | Notion, Kakao Talk 버튼 표시 |
| 11 | "로그아웃" 버튼 클릭 | 확인 대화상자 표시 |
| 12 | 로그아웃 확인 | /login으로 리다이렉트 |

**예상 결과:** ✅ 프로필 정보 수정 및 로그아웃 정상 작동

---

### UC-6: 네비게이션 및 라우팅
**시나리오:** 사용자가 애플리케이션의 모든 페이지를 정상적으로 네비게이션

**전제 조건:**
- 사용자가 로그인된 상태

**테스트 단계:**

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | 모든 페이지에서 Univ-Insight 로고 클릭 | 홈페이지로 이동 |
| 2 | 홈페이지에서 연구 논문 검색 버튼 | /research로 이동 |
| 3 | ResearchPage에서 프로필 버튼 | /profile로 이동 |
| 4 | ProfilePage에서 홈 버튼 | /로 이동 |
| 5 | HomePage에서 리포트 보기 버튼 | /reports로 이동 |
| 6 | ReportPage에서 홈 버튼 | /로 이동 |
| 7 | 모든 페이지의 헤더 일관성 | 헤더 UI 동일하게 표시 |

**예상 결과:** ✅ 모든 페이지 간 네비게이션 정상 작동

---

### UC-7: 미인증 사용자 접근 제어
**시나리오:** 로그인하지 않은 사용자가 보호된 페이지에 접근 시도

**전제 조건:**
- 로그인하지 않은 상태

**테스트 단계:**

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | http://localhost:5173/research 직접 접속 | /login으로 리다이렉트 |
| 2 | http://localhost:5173/reports 직접 접속 | /login으로 리다이렉트 |
| 3 | http://localhost:5173/profile 직접 접속 | /login으로 리다이렉트 |
| 4 | 로그인 페이지에서 정보 입력 | 입력 필드 정상 작동 |
| 5 | 로그인 후 원래 페이지 자동 이동 | 안내되는 페이지로 이동 또는 홈 |

**예상 결과:** ✅ 미인증 사용자가 보호된 페이지 접근 불가

---

### UC-8: 에러 처리 및 폴백
**시나리오:** 백엔드 API가 응답하지 않을 때 프론트엔드가 gracefully 처리

**전제 조건:**
- 프론트엔드는 실행 중
- 백엔드는 중지된 상태

**테스트 단계:**

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | /login에서 로그인 시도 | 에러 메시지 또는 폴백 처리 |
| 2 | /research에서 검색 | Mock 데이터 또는 에러 메시지 표시 |
| 3 | /reports에서 리포트 생성 | 에러 메시지 표시 |
| 4 | 페이지가 완전히 크래시되지 않음 | UI는 정상 표시 |

**예상 결과:** ✅ 에러 상황에서도 UI 정상 유지

---

### UC-9: 상태 관리 (localStorage 테스트)
**시나리오:** 사용자가 로그인 후 페이지를 새로고침해도 로그인 상태 유지

**전제 조건:**
- 사용자가 로그인된 상태

**테스트 단계:**

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | 사용자가 /research 페이지 방문 | 논문 검색 페이지 표시 |
| 2 | 개발자 도구 열기 (F12) | localStorage에 user 데이터 확인 |
| 3 | 페이지 새로고침 (F5) | 로그인 상태 유지, /research 페이지 표시 |
| 4 | 다른 탭에서 애플리케이션 열기 | 로그인 상태 유지 (같은 localStorage) |
| 5 | localStorage 데이터 확인 | { id, name, role, interests } 포함 |

**예상 결과:** ✅ localStorage 기반 세션 유지 정상

---

### UC-10: 반응형 디자인 (모바일 호환성)
**시나리오:** 다양한 화면 크기에서 애플리케이션이 정상 작동

**전제 조건:**
- 각 페이지가 로드됨

**테스트 단계:**

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | 브라우저 개발자 도구에서 모바일 뷰 활성화 (320px) | 모든 요소가 화면에 맞게 조정 |
| 2 | 태블릿 뷰 (768px) | 2열 레이아웃으로 표시 |
| 3 | 데스크톱 뷰 (1920px) | 최대 너비(max-w-7xl) 적용 |
| 4 | 모바일에서 버튼 클릭 | 터치 영역이 충분함 (최소 44px) |
| 5 | 모바일에서 텍스트 가독성 | 텍스트 크기 적절함 |

**예상 결과:** ✅ 모든 화면 크기에서 정상 작동

---

## 📊 백엔드 API 테스트

### API-1: 사용자 생성
```bash
POST /api/v1/users
Content-Type: application/json

{
  "id": "student01",
  "name": "김철수",
  "role": "student",
  "interests": ["AI", "ML"]
}

Expected: 201 Created
Response: { "id": "student01", "name": "김철수", ... }
```

### API-2: 논문 목록 조회
```bash
GET /api/v1/research/papers?limit=10&university=KAIST

Expected: 200 OK
Response: {
  "items": [
    { "id": "...", "title": "...", "university": "KAIST", ... }
  ]
}
```

### API-3: 논문 분석 조회
```bash
GET /api/v1/research/papers/{paper_id}/analysis

Expected: 200 OK
Response: {
  "paper_id": "...",
  "title": "...",
  "analysis": "...",
  "career_path": { "job_title": "...", ... }
}
```

### API-4: Plan B 제안 조회
```bash
GET /api/v1/research/papers/{paper_id}/plan-b

Expected: 200 OK
Response: {
  "original_paper": { "title": "...", ... },
  "plan_b_suggestions": [
    { "title": "...", "similarity_score": 0.85, ... }
  ]
}
```

### API-5: 리포트 생성
```bash
POST /api/v1/reports/generate?user_id=student01

Expected: 200 OK
Response: {
  "status": "success",
  "report_id": "...",
  "papers": [ { "paper_id": "...", "title": "..." } ]
}
```

---

## ✅ 테스트 체크리스트

### 기능 테스트
- [ ] 회원가입 및 로그인
- [ ] 논문 검색 및 필터링
- [ ] 논문 상세 정보 조회
- [ ] Plan B 대안 대학 조회
- [ ] 리포트 생성
- [ ] 프로필 관리
- [ ] 로그아웃

### UI/UX 테스트
- [ ] 모든 버튼이 클릭 가능
- [ ] 모든 입력 필드가 작동
- [ ] 로딩 상태 표시
- [ ] 에러 메시지 표시
- [ ] 성공 메시지 표시
- [ ] 모달 팝업/클로즈
- [ ] 페이지 네비게이션

### 호환성 테스트
- [ ] 모바일 (320px)
- [ ] 태블릿 (768px)
- [ ] 데스크톱 (1920px)
- [ ] Chrome 브라우저
- [ ] Edge 브라우저
- [ ] Firefox 브라우저 (선택사항)

### 통합 테스트
- [ ] 백엔드 API 응답 처리
- [ ] JWT 토큰 처리
- [ ] localStorage 저장/로드
- [ ] 에러 처리

---

## 🔄 테스트 실행 순서

1. **매뉴얼 E2E 테스트** (이 문서의 시나리오)
2. **API 통합 테스트** (Swagger UI 또는 curl)
3. **백엔드 단위 테스트** (`pytest tests/`)
4. **자동화 E2E 테스트** (향후: Playwright/Cypress)

---

## 📝 테스트 결과 기록

각 테스트 실행 후 결과를 기록합니다:

```
테스트명: UC-1 사용자 회원가입 및 로그인
날짜: 2025-11-24
결과: ✅ PASS / ❌ FAIL
소요시간: ~2분
이슈: 없음 / 있음 (상세 기술)
```

---

## 🎯 성공 기준

- **전체 유즈케이스의 95% 이상 통과**
- **전체 API 엔드포인트의 100% 동작 확인**
- **모바일 호환성 검증**
- **에러 처리 검증**
- **모든 이슈 해결**

---
